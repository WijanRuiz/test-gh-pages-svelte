import{S as Q,i as W,s as X,e as y,v as F,j,t as U,c as g,a as S,w as G,d as _,l as B,g as A,b as N,f as w,x as H,L as v,M as C,V as R,h as V,p as O,n as P,A as Z,U as z,o as Y,O as x,N as tt,Z as et,_ as st,m as ot,P as at}from"../../../chunks/vendor-47e42e2c.js";import{t as M,a as nt}from"../../../chunks/todosSupabase-25350f62.js";import{B as lt,S as rt}from"../../../chunks/button-011beeb2.js";import{I as ut}from"../../../chunks/icon-ea667a57.js";import"../../../chunks/supabase-2551c048.js";class it{constructor(l){this.task=l}}function J(o,l,u){const f=o.slice();return f[8]=l[u],f}function K(o){let l,u,f,a,i,h=o[8].created_at+"",m,c,k=o[8].task+"",p,$,d,r,E,I;u=new ut({props:{icon:"trash"}});function T(){return o[5](o[8])}return{c(){l=y("button"),F(u.$$.fragment),f=j(),a=y("a"),i=y("li"),m=U(h),c=U(" - "),p=U(k),$=j(),this.h()},l(e){l=g(e,"BUTTON",{});var b=S(l);G(u.$$.fragment,b),b.forEach(_),f=B(e),a=g(e,"A",{href:!0});var t=S(a);i=g(t,"LI",{});var n=S(i);m=A(n,h),c=A(n," - "),p=A(n,k),n.forEach(_),$=B(t),t.forEach(_),this.h()},h(){N(a,"href",d="/todos/"+o[8].id)},m(e,b){w(e,l,b),H(u,l,null),w(e,f,b),w(e,a,b),v(a,i),v(i,m),v(i,c),v(i,p),v(a,$),r=!0,E||(I=C(l,"click",R(T)),E=!0)},p(e,b){o=e,(!r||b&4)&&h!==(h=o[8].created_at+"")&&V(m,h),(!r||b&4)&&k!==(k=o[8].task+"")&&V(p,k),(!r||b&4&&d!==(d="/todos/"+o[8].id))&&N(a,"href",d)},i(e){r||(O(u.$$.fragment,e),r=!0)},o(e){P(u.$$.fragment,e),r=!1},d(e){e&&_(l),Z(u),e&&_(f),e&&_(a),E=!1,I()}}}function ft(o){let l,u,f,a,i,h,m,c,k,p,$,d,r,E,I;p=new lt({props:{type:"submit",content:"Guardar",state:rt.Info,icon:"save"}});let T=o[2],e=[];for(let t=0;t<T.length;t+=1)e[t]=K(J(o,T,t));const b=t=>P(e[t],1,1,()=>{e[t]=null});return{c(){l=y("h1"),u=U("Todos"),f=j(),a=y("form"),i=y("label"),h=U("Tarea"),m=j(),c=y("input"),k=j(),F(p.$$.fragment),$=j(),d=y("ul");for(let t=0;t<e.length;t+=1)e[t].c();this.h()},l(t){l=g(t,"H1",{});var n=S(l);u=A(n,"Todos"),n.forEach(_),f=B(t),a=g(t,"FORM",{});var s=S(a);i=g(s,"LABEL",{for:!0});var L=S(i);h=A(L,"Tarea"),L.forEach(_),m=B(s),c=g(s,"INPUT",{name:!0,type:!0}),k=B(s),G(p.$$.fragment,s),s.forEach(_),$=B(t),d=g(t,"UL",{});var D=S(d);for(let q=0;q<e.length;q+=1)e[q].l(D);D.forEach(_),this.h()},h(){N(i,"for","task"),N(c,"name","task"),N(c,"type","text")},m(t,n){w(t,l,n),v(l,u),w(t,f,n),w(t,a,n),v(a,i),v(i,h),v(a,m),v(a,c),z(c,o[1]),v(a,k),H(p,a,null),w(t,$,n),w(t,d,n);for(let s=0;s<e.length;s+=1)e[s].m(d,null);r=!0,E||(I=[C(c,"input",o[4]),C(a,"submit",R(o[3]))],E=!0)},p(t,[n]){if(n&2&&c.value!==t[1]&&z(c,t[1]),n&4){T=t[2];let s;for(s=0;s<T.length;s+=1){const L=J(t,T,s);e[s]?(e[s].p(L,n),O(e[s],1)):(e[s]=K(L),e[s].c(),O(e[s],1),e[s].m(d,null))}for(ot(),s=T.length;s<e.length;s+=1)b(s);Y()}},i(t){if(!r){O(p.$$.fragment,t);for(let n=0;n<T.length;n+=1)O(e[n]);r=!0}},o(t){P(p.$$.fragment,t),e=e.filter(Boolean);for(let n=0;n<e.length;n+=1)P(e[n]);r=!1},d(t){t&&_(l),t&&_(f),t&&_(a),Z(p),t&&_($),t&&_(d),x(e,t),E=!1,tt(I)}}}async function kt({url:o,params:l}){return await M.all(),{props:{todos:nt}}}async function ct(o){await M.delete(o)}function _t(o,l,u){let f,a=at,i=()=>(a(),a=et(h,r=>u(2,f=r)),h);o.$$.on_destroy.push(()=>a());let{todos:h}=l;i();let m="";const c=async r=>await M.all(),k=M.subscribe(c);async function p(){let r=new it(m);await M.create(r),u(1,m="")}st(()=>k.unsubscribe());function $(){m=this.value,u(1,m)}const d=r=>ct(r.id);return o.$$set=r=>{"todos"in r&&i(u(0,h=r.todos))},[h,m,f,p,$,d]}class vt extends Q{constructor(l){super();W(this,l,_t,ft,X,{todos:0})}}export{vt as default,kt as load};
